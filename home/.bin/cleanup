#!/usr/bin/env ruby
require 'colored'

def header(header)
  puts "------> ".blue + "#{header}.."
end

def cmd(cmd)
  puts "\t$ #{cmd}".green
  system cmd
end

header "Updating Vim plugins"
cmd "vim +BundleInstall! +qall"

header "Updating Homebrew"
cmd "brew update -s"

header "Upgrading Homebrew"
cmd "brew upgrade -s"

header "Let Homebrew clean up"
cmd "brew cleanup -s"

header "Removing Homebrew cache"
cmd "rm -rf ~/Library/Caches/Homebrew/*"

header "Removing Homebrew orphans"
cmd "brew rm $(join <(brew leaves) <(brew deps $1))"

header "Updating npm"
cmd "npm update npm -g -s"

header "Updating tmux-MacOSX-pasteboard"
cmd <<-CMD
  rm -rf /tmp/pasteboard && \
  git clone git://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard.git /tmp/pasteboard && \
  cd /tmp/pasteboard && make reattach-to-user-namespace > /dev/null && \
  cp reattach-to-user-namespace ~/bin && \
  chmod +x ~/.bin/reattach-to-user-namespace && rm -rf /tmp/pasteboard
CMD

header "Updating hub"
cmd "curl http://defunkt.io/hub/standalone -sLo ~/.bin/hub && chmod +x ~/.bin/hub"

header "Updating gist"
cmd "curl -s https://raw.github.com/defunkt/gist/master/gist > ~/.bin/gist && chmod +x ~/.bin/gist"

header "Updating vimpager"
cmd "curl -s https://raw.github.com/rkitover/vimpager/master/vimpager > ~/.bin/vimpager && chmod +x ~/.bin/vimpager"

header "Update rbenv.."
cmd "cd ~/.rbenv && git pull"

header "Remove screenshots from desktop"
cmd "rm ~/Desktop/Screen*.png"

header "Taking out the trash"
cmd "rm -Rf ~/.Trash/*"
